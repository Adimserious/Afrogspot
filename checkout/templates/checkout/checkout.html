{% extends 'base.html' %}

{% block content %}
<h2>Checkout</h2>

{% if messages %}
<div class="alert-container">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}

<form method="post" action="{% url 'checkout' %}">
    {% csrf_token %}
    <div class="form-group">
        <label for="{{ form.full_name.id_for_label }}">Full Name <span class="required">*</span></label>
        {{ form.full_name }}
        {% if form.full_name.errors %}
        <div class="invalid-feedback">
            {{ form.full_name.errors }}
        </div>
        {% endif %}
    </div>
    <div class="form-group">
        <label for="{{ form.email.id_for_label }}">Email Address <span class="required">*</span></label>
        {{ form.email }}
        {% if form.email.errors %}
        <div class="invalid-feedback">
            {{ form.email.errors }}
        </div>
        {% endif %}
    </div>
    <div class="form-group">
        <label for="{{ form.phone_number.id_for_label }}">Phone Number <span class="required">*</span></label>
        {{ form.phone_number }}
        {% if form.phone_number.errors %}
        <div class="invalid-feedback">
            {{ form.phone_number.errors }}
        </div>
        {% endif %}
    </div>
    <div class="form-group">
        <label for="{{ form.address_line_1.id_for_label }}">Address Line 1 <span class="required">*</span></label>
        {{ form.address_line_1 }}
        {% if form.address_line_1.errors %}
        <div class="invalid-feedback">
            {{ form.address_line_1.errors }}
        </div>
        {% endif %}
    </div>
    <div class="form-group">
        <label for="{{ form.address_line_2.id_for_label }}">Address Line 2</label>
        {{ form.address_line_2 }}
        {% if form.address_line_2.errors %}
        <div class="invalid-feedback">
            {{ form.address_line_2.errors }}
        </div>
        {% endif %}
    </div>
    <div class="form-group">
        <label for="{{ form.city.id_for_label }}">City <span class="required">*</span></label>
        {{ form.city  }}
        {% if form.city.errors %}
        <div class="invalid-feedback">
            {{ form.city.errors }}
        </div>
        {% endif %}
    </div>
    <div class="form-group">
        <label for="{{ form.postal_code.id_for_label }}">Postal Code</label>
        {{ form.postal_code }}
        {% if form.postal_code.errors %}
        <div class="invalid-feedback">
            {{ form.postal_code.errors }}
        </div>
        {% endif %}
    </div>
    <div class="form-group">
        <label for="{{ form.country.id_for_label }}">Country <span class="required">*</span></label>
        {{ form.country }}
        {% if form.country.errors %}
        <div class="invalid-feedback">
            {{ form.country.errors }}
        </div>
        {% endif %}
    </div>
    {% if user.is_authenticated %}
    <div class="form-check">
        <input type="checkbox" id="id_save_info" name="save_info" class="form-check-input">
        <label class="form-check-label" for="id_save_info">Save this delivery information to my profile</label>
    </div>
    {% endif %}
    <!-- Code Code institute boutique ado -->
    <fieldset class="px-3">
        <legend class="fieldset-label small text-black px-2 w-auto">Payment</legend>
        <!-- A Stripe card element will go here -->
        <div class="mb-3" id="card-element"></div>

        <!-- Used to display form errors -->
        <div class="mb-3 text-danger" id="card-errors" role="alert"></div>
    </fieldset>
    <a href="#" class="btn btn-outline-black rounded-0">
        <span class="icon">
            <i class="fas fa-chevron-left"></i>
        </span>
        <span class="font-weight-bold">Adjust Bag</span>
    </a>
    <button type="submit" class="btn btn-primary">Place Order</button>
    <p class="small text-danger my-0">
        <span class="icon">
            <i class="fas fa-exclamation-circle"></i>
        </span>
        <span>Your card will be charged <strong>${{ grand_total|floatformat:2 }}</strong></span>
    </p>
</form>

</form>

{% endblock %}